---
tags:
  - cs/programming-model
---

# What


## IoC란?

제어의 역전(IoC)이란 **객체에 대한**(생성, 라이프사이클 등) **제어권**을 개발자가 아닌 IoC 컨테이너에게 넘긴 것을 말합니다.  



## IoC와 DI
[[Spring]]의 IoC 컨테이너는 등록된 빈들을 빈 설정 정보를 바탕으로 **의존성 주입**([[DI]])하는 역할을 합니다.

출처: [https://dev-coco.tistory.com/163](https://dev-coco.tistory.com/163) [슬기로운 개발생활:티스토리]


프로그램의 제어 흐름 구조가 뒤바뀌는 것.
main 함수에서 사용될 객체를 결정하고 메서드를 호출하는 일반적인 프로그램과 달리 제어 흐름을 뒤집는 것. 

스프링의 IoC 컨테이너 역할:  객체를 생성하고 관리하고 의존성을 관리. 이 때 컨테이너가 빈 설정정보를 바탕으로 자동으로 DI를 해준다.

객체들은 자신이 사용할 객체를 스스로 선택하지 않는다.  
당연히 생성하지도 않는다. 또 자신도 어떻게 만들어지고 어디서 사용되는지 알 수 없다. 모든 제어 권한을 자신이 아닌 다른 대상(스프링)에게 위임하기 때문이다.

[[관심사의 분리]]
관심사를 분리함으로서 객체들의 응집도는 높이고 결합도를 낮춤으로써 유연하게 확장 가능한 구조로 만들기 위해 사용된다. 

## [[프레임워크#IoC 라이브러리 와 프레임워크의 차이]]

라이브러리에선 라이브러리의 코드가 애플리케이션 코드에 의해 사용되던 것과 반대로, 프레임워크에서는 거꾸로 애플리케이션 코드가 프레임워크에 의해 사용된다.  

[[IoC]]에서는 프레임워크 또는 컨테이너와 같이 애플리케이션 컴포넌트이 생성과 관계 설정, 사용, 생명 주기 관리 등을 관장하는 존재가 필요하다.


## [[빈 팩토리]]

스프링에서는 빈의 생성과 관계 설정과 같은 제어를 담당하는 IoC 객체를 빈 팩토리 혹은 [[애플리케이션 컨텍스트]]라고 부른다.  


## ### [[DI]]

스프링이 제공하는 IoC방식의 핵심을 말하는 용어이다.  

IoC는 DI보다 더 일반적이다.  
DI가 없는 IoC의 한 예로 [[템플릿 메서드 패턴]]이 있다.

### [[DL]]

## 예시
### [[서블릿]]
서블릿의 실행을 개발자가 직접 제어하는 방법은 없다. 대신 서블릿의 제어 권한을 가진 컨테이너가 적절한 시점에 서블릿 클래스를 만들고 그 안의 메서드를 호출한다.
 
### 템플릿 메서드 패턴
템플릿 메서드 패턴에서 제어권은 상위 템플릿 메서드에 있다. 서브 클래스에서 구현되는 훅 메서드들은 언제 어떻게 사용될지 자신은 모른다. 

자신은 필요할 때 호출되어 사용되도록 하는 것.
여기서 제어의 역전 개념을 발견할 수 있다.



# Why

## 모듈간의 낮은 결합도

객체를 관리해주는 프레임워크와 개발자가 구현할 부분으로 역할과 관심을 분리해 응집도를 높이고 결합도를 낮추며, 이에 따라 변경에 유연한 코드를 작성 할 수 있는 구조가 된다.  

DI를 사용하면 한 객체가 다른 객체에 의존할 때, 그 의존성이 강력하게 결합되는 것을 방지할 수 있습니다. 

객체가 직접적으로 의존성을 생성하지 않고 외부에서 주입받기 때문에, 해당 객체는 구체적인 구현 대신 인터페이스에만 의존하게 됩니다. 이렇게 되면 **한 부분의 변경이 다른 부분에 미치는 영향을 최소화**할 수 있으며, 코드의 유연성과 재사용성이 증가합니다.

## 높은 응집도

IoC를 사용하면 애플리케이션의 제어 흐름 관리와 비즈니스 로직 실행 등 복잡한 프로세스를 분리하여 관리할 수 있습니다. 이로 인해 각 클래스나 모듈은 **자신의 역할에 집중**할 수 있으며, 코드가 깔끔해지고 유지보수하기 쉬워집니다.


## 테스트 용이성

DI와 IoC를 사용하면 실제 구현 대신 Mock 객체나 Stub 등을 주입하여 테스트하기 용이합니다. 

예를 들어 데이터베이스 연결처럼 실제 환경에서만 동작하는 요소 대신 가상의 요소를 제공해서 단위 테스트(Unit Test) 환경에서도 원활하게 동작시킬 수 있습니다.
# How
