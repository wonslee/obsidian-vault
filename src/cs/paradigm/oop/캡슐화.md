---
tags:
  - cs/paradigm
---

# What
## 캡슐화란?

캡슐화란 정보 은닉이다.  
 캡슐화란 클래스 안에 **서로 연관있는 속성과 기능들을 하나의 캡슐(capsule)로 만들어 데이터를 외부로부터 보호하는 것**을 말합니다.

## [[구현]]과 [[인터페이스]]

객체의 상태는 [[구현]]에 속한다.  
구현은 불안정하기 때문에 변하기 쉽다. 
상태를 객체의 중심축으로 삼으면 구현에 관한 세부사항이 객체의 인터페이스에 스며들게 되고 [[캡슐화]] 원칙이 무너진다.

객체의 책임은 [[인터페이스]]에 속한다. 
객체는 책임을 드러내는 안정적인 인터페이스 뒤로 책임을 수행하는 데 필요한 상태를 캡슐화함으로써 구현 변경에 대한 파장이 외부로 퍼져나가는 것을 방지한다. 


## 캡슐화의 종류

오브젝트 14장...
https://dalsacoo-log.tistory.com/entry/object-14

![](https://blog.kakaocdn.net/dn/bgKSCV/btq9tHSUFp9/UK0Mifv9fcEwwesO8TKRyk/img.png)


### 데이터 캡슐화

 : Movie 클래스의 `인스턴스 변수` title의 가시성은 private이기 때문에 외부에서 직접 접근할 수 없다. 이 속성에 접근할 수 있는 유일한 방법은 `메서드`를 이용하는 것뿐이다. 다시 말해 클래스는 내부에 관리하는 데이터를 캡슐화한다.  

[[OCP]]

### 메서드 캡슐화

: `DiscountPolicy` 클래스에서 정의돼 있는 `getDiscountAmount` 메서드의 가시성은 `protected`다. 클래스의 외부에서는 이 메서드에 직접 접근할 수 없고 클래스 내부와 서브 클래스에서만 접근이 가능하다. **따라서 클래스 외부에 영향을 미치지 않고 메서드를 수정할 수 있다.** 다시 말해 클래스의 내부 행동을 캡슐화하고 있는 것이다.


### 객체 캡슐화 (= [[합성]])

: `Movie` 클래스는 `DiscountPolicy` 타입의 인스턴스 변수 `discountPolicy`를 포함한다. 이 인스턴스 변수는 private 가시성을 가지기 때문에 Movie와 DisvountPolicy 사이의 관계를 변경 하더라도 외부에는 영향을 미치지 않는다. **다시 말해서 객체와 객체 사이의 관계를 캡슐화한다.** 눈치가 빠른 사람이라면 객체 캡슐화가 [[합성]]을 의미한다는 것을 눈치챘을 것이다.


### 서브타입 캡슐화 ([[다형성]])

: `Movie`는 `DiscountPolicy`에 대해서는 알고 있지만 `AmountDiscountPolicy`와 `PercentDiscountPolicy`에 대해서는 알지 못한다. 그러나 실제로 실행 시점에는 이 클래스들의 인스턴스와 협력할 수 있다. 이것은 파생 클래스인 `DiscountPolicy`와의 추상적인 관계가 `AmountDiscountPolicy`와 `PercentDiscountPolicy`의 존재를 감추고 있기 때문이다. 다시 말해 서브타입의 종류를 캡슐화하고 있는 것이다. 눈치가 빠른 사람이라면 서브타입 캡슐화가 [[다형성]]의 기반이 된다는 것을 알 수 있을 것이다.



# Why

**높은 응집도**(Cohesion) 과 **낮은 결합도**(Coupling) 를 유지해야 요구사항에 맞춰 유연하게 대처 할 수 있다.
      
- **응집도** : 모듈(클래스) 내에서 요소들이 얼마나 밀접하게 관련이 있는지. 
	  응집도는 [[정보 은닉]]을 통해 높일 수 있다. 즉, 내부에서만 사용하는 정보는 외부에서 접근하지 못하도록 제한. = **접근 제한자** e.g. private
- **결합도** : 어떤 클래스가 기능을 수행하는데 다른 클래스(모듈)에 얼마나 의존적인지


상태와 행동을 하나의 객체 안에 모으는 이유는 내부 구현을 외부로부터 감추기 위해서다.  
여기서 [[구현]]이란 나중에 변경될 가능성이 높은 어떤 것을 가리킨다.

반대로 상대적으로 안정적인 부분을 [[인터페이스]]라고 부른다.

객체 지향 설계의 가장 중요한 원리는 불안정한 구현 세부사항을 안정저인 인터페이스 뒤로 캡슐화하는 것이다.


# How

## [[디미터 법칙]]

               