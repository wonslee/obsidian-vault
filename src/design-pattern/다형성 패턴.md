
# What


![](https://blog.kakaocdn.net/dn/u5oh9/btrsO3bIyJj/1300J2SUKzmBKSgNJSZun0/img.png)

위 UML은 할인 조건에 해당하는 두 타입(Period, Sequence)의 객체에 대해 Movie가 의존하는 형태다. 
두 객체는 같은 책임을 가졌지만, 가진 속성과 내부 구현이 다른 상태이다.  

여기서 첫번째 문제점은, Movie 클래스가 양쪽 모두에게 결합된다는 것이다. DiscountCondition 객체 하나에게 결합되었을 때보다 Movie의 응집도가 낮아진다.  

두번째 문제점은 새로운 할인 조건을 추가하기가 어려워졌다는 것이다.  

이 문제를 [[다형성]]으로 해결할 수 있다.
[[역할]]을 생각해보자. 

두 조건이 동일한 책임을 수행한다는 것은 하나의 역할에 대한 대체 가능한 클래스임을 의미한다.  
-> DiscountCondition 인터페이스의 구현체로써 만든다.  
=> Movie는 구체적인 클래스는 알지 못한 채로 오직 역할에 대해서만 결합된다. 그럼으로써 할인 조건에 대한 요구사항이 변경되더라도 Movie에는 변경의 영향이 미치지 않는다.  

[[GRASP]]에서는 이를 [[다형성 패턴]]이라고 부른다. 


객체의 **암시적인 타입에 따라 행동을 분기해야 한다면** 그 타입을 명시적인 클래스로써 정의하고 행동을 나눔으로써 응집도 문제를 해결하자.  

타입에 따라 변하는 행동이 있다면, 타입을 분리하고 행동을 각 타입의 책임으로 할당하라는 것이다. 
프로그램을 조건 논리(if else, switch case)를 사용해 설계한다면 새로운 변경이 일어날 때 조건 논리를 수정해야 한다. 이는 프로그램을 수정하기 어렵고 변경에 취약하게 만든다.   

